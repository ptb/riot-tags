/*! github.com/ptb/riot-tags, @license Apache-2.0 */
riot.tag2("ptb-router","<yield></yield>","","",function(a){var b;b=this,b.ptb=function(a){var c,d,e;c={},d=location,[d.pathname,d.search,d.hash].forEach(function(a){var b,d,e;a=a.replace(/^(\?|#)/,""),b=function(a){return a&&decodeURIComponent(a.replace(/\+/g," "))},d=function(a){c.path=[],a.replace(/([^\/]+)/g,function(a,d){c.path.push(b(d))})},e=function(a,b,c){var d,f,g,h;return c=c?c:null,(d=/(.+?)\[(.+?)?\](.+)?/g.exec(b))?(f=d[1],g=d[2],h=d[3],void 0===g?(void 0===a[f]&&(a[f]=[]),a[f].push(c)):("object"!=typeof a[f]&&(a[f]={}),h?e(a[f],g+h,c):e(a[f],g,c)),void 0):(a.hasOwnProperty(b)?Array.isArray(a[b])?a[b].push(c):a[b]=[].concat.apply([a[b],[c]]):a[b]=c,a[b])},"/"===a.charAt(0)?d(a):a.replace(/([^#&;=?]+)?=?([^&;]+)?/g,function(a,f,g){"path"===f?d(g):f&&e(c,b(f),b(g))})}),e=function(a,b){var d;for(d in b)try{b[d].constructor===Object?a[d]=e(a[d],b[d]):a[d]=b[d]}catch(c){a[d]=b[d]}return a},e(b,c),a&&b.update()}.bind(b),b.on("mount",function(){window.addEventListener("hashchange",b.ptb),window.addEventListener("popstate",b.ptb)}),b.on("unmount",function(){window.removeEventListener("hashchange",b.ptb),window.removeEventListener("popstate",b.ptb)}),b.ptb()});