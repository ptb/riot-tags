/*! github.com/ptb/riot-tags, @license Apache-2.0 */
riot.tag2("ptb-route","<yield></yield>",'ptb-route,[data-is="ptb-route"]{display:inline-block}','class="{c}" if="{s||i||o}"',function(a){var b,c,d,e,f,g;b=this,b.param={},c=b.parent,d=b.root,e=function(a){var d,e,f,g,h,i;if(d=[],e=c.path,a.replace(/([^\/]+)/g,function(a,b){d.push(b)}),f=0,g=d.length,h="*"===d[g-1],i=e.length,g===i||h){for(;g>f;)if("*"!==d[f]){if(/^:/.test(d[f]))b.param[d[f].replace(/^:/,"")]=e[f];else if(d[f]!==e[f])return!1;f++}else{if(f===g-1)return!0;f++}return!0}return!1},f=function(a){a.target.trigger("cleanup")},g=function(a){b.d=a.target.getAttribute("rel"),a.preventDefault(),history.pushState(null,null,a.target.getAttribute("href")),window.dispatchEvent(new HashChangeEvent("hashchange"))},b.on("mount",function(){d.trigger=b.trigger}),b.on("update",function(){b.a=c.anim||b.param.anim||b.opts.dataAnim||c.opts.dataAnim,b.i=b.i,b.o=b.s,b.s=e(a.dataPath||""),b.i=b.s&&null!=b.i,b.c=[b.a,b.d,b.i?"in":void 0,b.o?"out":void 0].filter(function(a){return void 0!==a}).join(" "),b.s&&b.redirect&&(/^http/.test(b.redirect)?location.href=b.redirect:history.pushState?(history.pushState(null,null,b.redirect),window.dispatchEvent(new HashChangeEvent("hashchange"))):location.hash="path="+b.redirect)}),b.on("updated",function(){d.addEventListener("animationstart",function a(){d.removeEventListener("animationstart",a),d.addEventListener("animationend",f)}),history.pushState&&Array.prototype.slice.call(d.getElementsByTagName("a")).forEach(function(a){a.addEventListener("click",g)})}),b.on("cleanup",function(){d.classList.remove("in"),d.classList.remove("out"),d.classList.remove(b.a),d.classList.remove(b.d),d.removeEventListener("animationend",f),b.o&&b.update()})});